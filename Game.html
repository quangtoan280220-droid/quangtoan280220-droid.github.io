<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Leo n√∫i v∆∞·ª£t ch∆∞·ªõng ng·∫°i v·∫≠t</title>
  <style>
    :root {
      --mountain-width: 360px;
      --mountain-height: 520px;
      --character-size: 66px;
      --step-count: 6; /* s·ªë ch∆∞·ªõng ng·∫°i/c√¢u h·ªèi = s·ªë b∆∞·ªõc leo */
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      background: linear-gradient(#aee1f9, #eaf7ff);
      color: #222;
      display: flex;
      min-height: 100vh;
      align-items: center;
      justify-content: center;
    }

    .game {
      width: min(960px, 95vw);
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      padding: 20px;
    }

    .panel {
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 10px 24px rgba(0,0,0,0.08);
      padding: 16px;
    }

    .title {
      font-weight: 700;
      font-size: 20px;
      margin-bottom: 8px;
    }

    .subtitle {
      color: #666;
      font-size: 14px;
      margin-bottom: 16px;
    }

    /* Khu v·ª±c n√∫i v√† nh√¢n v·∫≠t */
    .mountain-wrap {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 12px;
    }

    .mountain {
      position: relative;
      width: var(--mountain-width);
      height: var(--mountain-height);
      border-radius: 12px;
      overflow: hidden;
      background-image: url('fuji.jpg'); /* ƒê·ªïi th√†nh ƒë∆∞·ªùng d·∫´n ·∫£nh b·∫°n c√≥ */
  background-size: cover;
  background-position: center;
    }


    /* V·∫°ch m·ªëc ƒë·ªô cao */
    .marker {
      position: absolute;
      left: 8px;
      width: calc(100% - 16px);
      height: 1px;
      background: rgba(255,255,255,0.7);
    }
    .marker-label {
      position: absolute;
      left: 8px;
      top: -10px;
      font-size: 12px;
      color: #fff;
      text-shadow: 0 1px 2px rgba(0,0,0,0.4);
    }

    /* Nh√¢n v·∫≠t */
    .character {
      position: absolute;
      left: 50%;
      transform: translate(-50%, -50%);
      width: var(--character-size);
      height: var(--character-size);
      border-radius: 10%;
      background-image: url('samurai.png'); /* ƒê·ªïi th√†nh ƒë∆∞·ªùng d·∫´n ·∫£nh chi·∫øn binh */
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  transition: bottom .5s ease;

    }

    .character::after {
      content: "";
      position: absolute;
      bottom: -6px; left: 50%;
      transform: translateX(-50%);
      width: 18px; height: 6px;
      background: rgba(0,0,0,0.15);
      border-radius: 50%;
      filter: blur(2px);
    }

    /* Khu v·ª±c c√¢u h·ªèi */
    .question {
      margin-bottom: 12px;
      font-weight: 600;
    }

    .options {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-bottom: 12px;
    }

    .option {
      padding: 10px 12px;
      border: 1.5px solid #e6eef7;
      border-radius: 10px;
      background: #f8fbff;
      cursor: pointer;
      transition: transform 120ms ease, box-shadow 120ms ease, border-color 120ms ease;
      user-select: none;
    }
    .option:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(0,0,0,0.08);
      border-color: #cfe0f5;
    }

    .status {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      color: #555;
      min-height: 24px;
    }

    .controls {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .btn {
      padding: 10px 12px;
      border: none;
      border-radius: 10px;
      background: #3a7bd5;
      color: #fff;
      cursor: pointer;
      font-weight: 600;
      transition: filter 120ms ease, transform 120ms ease;
    }
    .btn:hover { filter: brightness(1.05); transform: translateY(-1px); }
    .btn.secondary { background: #6c757d; }

    .progress {
      margin-top: 10px;
      height: 8px;
      background: #eef4fb;
      border-radius: 999px;
      overflow: hidden;
    }
    .progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #3a7bd5, #00d2ff);
      transition: width 300ms ease;
    }

    .toast {
      margin-top: 8px;
      padding: 10px 12px;
      border-radius: 10px;
      background: #f1f9f1;
      color: #2f6b2f;
      border: 1px solid #d7efd7;
      display: none;
    }
    .toast.error {
      background: #fff5f5;
      color: #8a2f2f;
      border-color: #ffd7d7;
    }

    @media (max-width: 820px) {
      .game { grid-template-columns: 1fr; }
      .mountain { margin: 0 auto; }
    }
  </style>
</head>
<body>
  <div class="game">
    <!-- B√™n tr√°i: N√∫i v√† nh√¢n v·∫≠t -->
    <div class="panel">
      <div class="title">Leo n√∫i v∆∞·ª£t ch∆∞·ªõng ng·∫°i v·∫≠t</div>
      <div class="subtitle">Tr·∫£ l·ªùi ƒë√∫ng ƒë·ªÉ leo ti·∫øp‚Äîsai l√† tu·ªôt v·ªÅ ch√¢n n√∫i.</div>

      <div class="mountain-wrap">
        <div id="mountain" class="mountain">
          <div class="peak"></div>
          <div class="slope"></div>
          <div class="base"></div>

          <!-- V·∫°ch m·ªëc theo s·ªë b∆∞·ªõc -->
          <!-- T·ª± ƒë·ªông th√™m b·∫±ng JS -->

          <!-- Nh√¢n v·∫≠t -->
          <div id="character" class="character" style="top: 95%;"></div>
        </div>
      </div>

      <div class="status">
        <span id="statusText">B·∫Øt ƒë·∫ßu t·ª´ ch√¢n n√∫i.</span>
      </div>
      <div class="progress">
        <div id="progressBar" class="progress-bar"></div>
      </div>
      <div class="controls">
        <button id="resetBtn" class="btn secondary">Ch∆°i l·∫°i</button>
        <button id="shuffleBtn" class="btn secondary">ƒê·ªïi b·ªô c√¢u h·ªèi</button>
      </div>
      <div id="toast" class="toast">B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng!</div>
      <div id="toastError" class="toast error">Sai r·ªìi! Tu·ªôt v·ªÅ ch√¢n n√∫i‚Ä¶</div>
    </div>

    <!-- B√™n ph·∫£i: C√¢u h·ªèi -->
    <div class="panel">
      <div class="title">Ch∆∞·ªõng ng·∫°i v·∫≠t hi·ªán t·∫°i</div>
      <div id="questionText" class="question">Nh·∫•n ‚Äúƒê·ªïi b·ªô c√¢u h·ªèi‚Äù ho·∫∑c ch·ªçn ƒë√°p √°n ƒë·ªÉ b·∫Øt ƒë·∫ßu.</div>
      <div id="options" class="options"></div>
    </div>
  </div>

  <script>
    // B·ªô c√¢u h·ªèi m·∫´u (c√≥ th·ªÉ th√™m/b·ªõt)
    const questionSets = [
      [
        { q: "Th·ªß ƒë√¥ c·ªßa Vi·ªát Nam l√† g√¨?", options: ["A. H√† N·ªôi","B. TP. H·ªì Ch√≠ Minh","C. ƒê√† N·∫µng","D. Hu·∫ø"], answer: "A" },
        { q: "2 + 2 b·∫±ng m·∫•y?", options: ["A. 3","B. 4","C. 5","D. 6"], answer: "B" },
        { q: "Ai l√† t√°c gi·∫£ Truy·ªán Ki·ªÅu?", options: ["A. Nguy·ªÖn Du","B. Nguy·ªÖn Tr√£i","C. H·ªì Xu√¢n H∆∞∆°ng","D. T·ªë H·ªØu"], answer: "A" },
        { q: "Python l√† g√¨?", options: ["A. M·ªôt lo√†i r·∫Øn","B. Ng√¥n ng·ªØ l·∫≠p tr√¨nh","C. C·∫£ A v√† B","D. Kh√¥ng ph·∫£i"], answer: "C" },
        { q: "Bi·ªÉn l·ªõn nh·∫•t th·∫ø gi·ªõi?", options: ["A. ƒê·∫°i T√¢y D∆∞∆°ng","B. ·∫§n ƒê·ªô D∆∞∆°ng","C. Th√°i B√¨nh D∆∞∆°ng","D. B·∫Øc BƒÉng D∆∞∆°ng"], answer: "C" },
        { q: "S·ªë nguy√™n t·ªë l√† g√¨?", options: ["A. Ch·ªâ chia h·∫øt cho 1 v√† ch√≠nh n√≥","B. Chia h·∫øt cho nhi·ªÅu s·ªë","C. S·ªë ch·∫µn","D. S·ªë l·∫ª"], answer: "A" },
      ],
      [
        { q: "HTML d√πng ƒë·ªÉ l√†m g√¨?", options: ["A. T·∫°o c·∫•u tr√∫c trang web","B. V·∫Ω ƒë·ªì h·ªça 3D","C. L∆∞u tr·ªØ d·ªØ li·ªáu l·ªõn","D. D·ªãch ng√¥n ng·ªØ"], answer: "A" },
        { q: "CSS ch·ªß y·∫øu d√πng ƒë·ªÉ?", options: ["A. T·∫°o API","B. ƒê·ªãnh ki·ªÉu giao di·ªán","C. T√≠nh to√°n s·ªë h·ªçc","D. L∆∞u file"], answer: "B" },
        { q: "JavaScript ch·∫°y ·ªü ƒë√¢u?", options: ["A. Tr√¨nh duy·ªát","B. M√°y ch·ªß","C. C·∫£ A v√† B","D. Kh√¥ng n∆°i n√†o"], answer: "C" },
        { q: "Th·∫ª ƒë·ªÉ ch√®n ·∫£nh trong HTML?", options: ["A. <img>","B. <image>","C. <picture>","D. <photo>"], answer: "A" },
        { q: "Flexbox thu·ªôc v·ªÅ?", options: ["A. HTML","B. CSS","C. JS","D. SQL"], answer: "B" },
        { q: "console.log thu·ªôc?", options: ["A. CSS","B. HTML","C. JS","D. SQL"], answer: "C" },
      ]
    ];

    let questions = [];
    let level = 0; // v·ªã tr√≠ hi·ªán t·∫°i (0 = ch√¢n n√∫i)
    const mountain = document.getElementById('mountain');
    const character = document.getElementById('character');
    const statusText = document.getElementById('statusText');
    const progressBar = document.getElementById('progressBar');
    const questionText = document.getElementById('questionText');
    const optionsEl = document.getElementById('options');
    const toast = document.getElementById('toast');
    const toastError = document.getElementById('toastError');
    const resetBtn = document.getElementById('resetBtn');
    const shuffleBtn = document.getElementById('shuffleBtn');

    // T·∫°o v·∫°ch m·ªëc theo s·ªë c√¢u h·ªèi
    function renderMarkers(count) {
      // X√≥a c≈©
      mountain.querySelectorAll('.marker, .marker-label').forEach(el => el.remove());
      // Th√™m m·ªõi
      for (let i = 0; i <= count; i++) {
        const y = 95 - (i * (80 / count)); // t·ª´ 95% l√™n 15% (kho·∫£ng leo)
        const marker = document.createElement('div');
        marker.className = 'marker';
        marker.style.top = `${y}%`;
        mountain.appendChild(marker);

        const label = document.createElement('div');
        label.className = 'marker-label';
        label.style.top = `${y}%`;
        label.textContent = i === 0 ? 'Ch√¢n n√∫i' : (i === count ? 'ƒê·ªânh' : `M·ªëc ${i}`);
        mountain.appendChild(label);
      }
    }

    function setQuestionSet(index = 0) {
      questions = [...questionSets[index]];
      level = 0;
      renderMarkers(questions.length);
      updateCharacter();
      renderQuestion();
      setStatus("B·∫Øt ƒë·∫ßu t·ª´ ch√¢n n√∫i.");
      setProgress();
      hideToast();
    }

    function setStatus(text) {
      statusText.textContent = text;
    }

    function setProgress() {
      const percent = Math.round((level / questions.length) * 100);
      progressBar.style.width = `${percent}%`;
    }

    function updateCharacter() {
      // T√≠nh v·ªã tr√≠ top theo level
      const topPercent = 95 - (level * (80 / questions.length)); // 95% -> 15%
      character.style.top = `${topPercent}%`;
    }

    function renderQuestion() {
      if (level >= questions.length) {
        questionText.textContent = "üéâ Ch√∫c m·ª´ng! B·∫°n ƒë√£ chinh ph·ª•c ƒë·ªânh n√∫i!";
        optionsEl.innerHTML = "";
        return;
      }
      const q = questions[level];
      questionText.textContent = `‚õ∞Ô∏è Ch∆∞·ªõng ng·∫°i v·∫≠t ${level + 1}: ${q.q}`;
      optionsEl.innerHTML = "";
      q.options.forEach(opt => {
        const btn = document.createElement('div');
        btn.className = 'option';
        btn.textContent = opt;
        btn.addEventListener('click', () => handleAnswer(opt[0])); // k√Ω t·ª± ƒë·∫ßu A/B/C/D
        optionsEl.appendChild(btn);
      });
    }

    function showToastCorrect() {
      toast.style.display = 'block';
      toastError.style.display = 'none';
      setTimeout(() => toast.style.display = 'none', 1200);
    }

    function showToastError() {
      toastError.style.display = 'block';
      toast.style.display = 'none';
      setTimeout(() => toastError.style.display = 'none', 1500);
    }

    function hideToast() {
      toast.style.display = 'none';
      toastError.style.display = 'none';
    }

    function handleAnswer(choice) {
      const correct = questions[level].answer;
      if (choice === correct) {
        level++;
        showToastCorrect();
        setStatus("‚úÖ Ch√≠nh x√°c! B·∫°n leo ti·∫øp‚Ä¶");
        updateCharacter();
        setProgress();
        renderQuestion();
      } else {
        showToastError();
        setStatus("‚ùå Sai r·ªìi! B·∫°n tu·ªôt xu·ªëng ch√¢n n√∫i‚Ä¶");
        level = 0;
        updateCharacter();
        setProgress();
        renderQuestion();
      }
    }

    resetBtn.addEventListener('click', () => {
      level = 0;
      updateCharacter();
      setProgress();
      setStatus("ƒê√£ ƒë·∫∑t l·∫°i‚Äîb·∫Øt ƒë·∫ßu t·ª´ ch√¢n n√∫i.");
      renderQuestion();
      hideToast();
    });

    shuffleBtn.addEventListener('click', () => {
      const idx = Math.floor(Math.random() * questionSets.length);
      setQuestionSet(idx);
      setStatus("ƒê√£ ƒë·ªïi b·ªô c√¢u h·ªèi‚Äîleo n√†o!");
    });

    // Kh·ªüi t·∫°o
    setQuestionSet(0);

// N√∫t b·∫Øt ƒë·∫ßu
    startBtn.addEventListener('click', () => {
      startScreen.style.display = "none";
      gameEl.style.display = "grid";
      level = 0;
      updateCharacter();
      renderQuestion();
    });
  </script>
</body>
</html>